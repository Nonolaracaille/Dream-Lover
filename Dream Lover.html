<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dreamlover</title>
<link rel="icon" href="./image.png" type="image/png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-family: 'Cinzel', serif;
    overflow: hidden;
}

#bgVideo {
    position: fixed;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -1;
    transform: translate(-50%, -50%);
    object-fit: cover;
}

.overlay {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, rgba(0,0,0,0.4), rgba(0,0,0,0.9));
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    text-align: center;
    color: white;
    animation: fadeIn 2s ease;
}

.avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255,255,255,0.4);
    margin-bottom: 15px;
}

h1 { margin: 0; font-size: 36px; letter-spacing: 2px; }
.quote { margin-top: 8px; font-size: 14px; opacity: 0.7; }
.location { margin-top: 8px; font-size: 13px; opacity: 0.5; }
.icons { margin-top: 18px; display: flex; justify-content: center; gap: 18px; }
.icons a { color: white; font-size: 22px; opacity: 0.8; transition: 0.3s; }
.icons a:hover { opacity: 1; transform: scale(1.1); }

#compteurContainer {
    margin-top:8px;
    display:flex;
    align-items:center;
    gap:5px;
    justify-content:center;
    color:white;
    font-size:18px;
}

@keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
</style>

<script src="https://kit.fontawesome.com/7b2c1d4c8f.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
</head>
<body>

<video autoplay loop id="bgVideo">
    <source src="./video.mp4" type="video/mp4">
</video>

<div class="overlay">
    <div class="card">
        <img src="./avatar.jpeg" class="avatar" alt="avatar">
        <h1>Dream Lover</h1>
        <div class="quote">Let others criticize you, but don‚Äôt do it for them.</div>
        <div class="location">üìç France</div>

        <!-- Compteur global sous la localisation -->
        <div id="compteurContainer">
            <img src="./eye.jpeg" alt="oeil" style="width:20px; height:20px;">
            <span id="compteur">0</span>
        </div>

        <div class="icons">
            <a href="#" target="_blank"><i class="fab fa-snapchat-ghost"></i></a>
            <a href="#" target="_blank"><i class="fab fa-discord"></i></a>
            <a href="#" target="_blank"><i class="fab fa-tiktok"></i></a>
        </div>
    </div>
</div>

<script>
// Lecture de la vid√©o au clic (pour son)
document.addEventListener('click', () => { document.getElementById('bgVideo').play(); }, { once: true });

// Titre anim√©
const titre = "@Dream Lover";
let index = 0, sens = 1;
function ecrireTitre() {
    document.title = titre.slice(0,index);
    if(sens===1){ index++; if(index>titre.length){ sens=-1; setTimeout(ecrireTitre,500); return; } } 
    else { index--; if(index<0){ sens=1; } }
    setTimeout(ecrireTitre,500);
}
window.addEventListener('load', ecrireTitre);

// -------------------
// Compteur global Supabase
// -------------------
const SUPABASE_URL = "https://ypcdtygcorpfyufcglhw.supabase.co"; // Remplace par ton URL Supabase
const SUPABASE_ANON_KEY = "sb_publishable_AB_SynahI4ajVkM81Ge47Q_9ZqUiiE-"; // Remplace par ta cl√© anonyme

const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function incrementerCompteur() {
    // R√©cup√©rer le compteur
    let { data, error } = await supabase.from('visites').select('compteur').eq('id',1).single();
    if(error){ console.error(error); return; }

    let compteur = data.compteur + 1;

    // Mettre √† jour le compteur
    const { error:updateError } = await supabase.from('visites').update({ compteur }).eq('id',1);
    if(updateError){ console.error(updateError); return; }

    // Afficher dans le site
    document.getElementById('compteur').textContent = compteur;
}

incrementerCompteur();
</script>

</body>
</html>

